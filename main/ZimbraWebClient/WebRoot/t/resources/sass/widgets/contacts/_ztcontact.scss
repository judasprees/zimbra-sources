/*
 * ***** BEGIN LICENSE BLOCK *****
 * Zimbra Collaboration Suite Web Client
 * Copyright (C) 2013 Zimbra Software, LLC.
 *
 * The contents of this file are subject to the Zimbra Public License
 * Version 1.4 ("License"); you may not use this file except in
 * compliance with the License.  You may obtain a copy of the License at
 * http://www.zimbra.com/license.
 *
 * Software distributed under the License is distributed on an "AS IS"
 * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied.
 * ***** END LICENSE BLOCK *****
 */
$contactBkgdColor: $white;

$contactListStdMargin: 0.5rem;
$contactListHeight: 3.6rem;  /* estimated */
$contactListImageSize: 2.4rem;
$contactListLeftIndent: $contactListImageSize + $contactListStdMargin*3;
$contactListRightIndent: $contactListStdMargin;
$contactListTopOffset: 0.5rem;

$contactBaseFontSize: 1rem;
$contactImageSize: 7em;
$contactStdMargin: 0.7em;
$contactListImageTopOffset: $contactListHeight/2 - $contactListImageSize/2;
$contactButtonSize: $contactImageSize/1.5;
$contactGutter: 2em;
$contactFieldTopOffset: $contactImageSize + $contactStdMargin*3;
$contactFieldWidth: 23em;


/* Contact Image Base Classes */

.zcs-contact {
	background-position: center;
	background-size: 100% auto;
	background-repeat: no-repeat;
	@include border-radius($contactImageSize/2);
}

.zcs-contact-person {
	@extend .zcs-contact;
	background-image: url('../images/person.png');
}

.zcs-contact-group {
	@extend .zcs-contact;
	background-image: url('../images/group.png');
}

/* Generic Classes */

.zcs-floatLeft {
	float: left;
}

.zcs-floatRight {
	float: right;
}

.zcs-newLine {
	@extend .zcs-floatLeft;
	clear: left;
}

/* Contact List Classes */

.zcs-contactlist-item {
	position: absolute;
}

.zcs-contactlist-image {
	height: $contactListImageSize;
	width: $contactListImageSize;
}

.zcs-contactList-person {
	@extend .zcs-contactlist-image;
	@extend .zcs-contact-person;
	margin: $contactListStdMargin*2 0;
}

.zcs-contactList-group {
	@extend .zcs-contactlist-image;
	@extend .zcs-contact-group;
}

.zcs-contactList-text {
	@extend .zcs-contactlist-item;
	bottom: $contactListTopOffset;
	left: $contactListLeftIndent;
	right: $contactListRightIndent;
	top: $contactListTopOffset;

	DIV {
		@include ellipsis();
		line-height: 1.5rem;
		margin: $contactListStdMargin 0;
		width: 100%;
	}
	.zcs-contactList-name {
		font-size: 1.2rem;
	}
	.zcs-contactList-title {
		@include opacity(.75);
		font-size: 1rem;
	}
}

/* Contact View Classes */

.zcs-item-panel {

	.zcs-contactview {
		background-color: $contactBkgdColor;

		.x-innerhtml {
			padding: 4.5em 2em 2em;  // Larger top padding accounts for titlebar height
		}
	}
}

.zcs-contactview-header {
	font-size: $contactBaseFontSize;

	.zcs-contactview-image {
		@extend .zcs-floatLeft;
		@extend .zcs-contact-person;
		height: $contactImageSize;
		width: $contactImageSize;
	}

	.zcs-contactview-personalInfo {
		@extend .zcs-floatLeft;
		margin-left: $contactGutter;

		SPAN {
			@extend .zcs-newLine;
			//@include ellipsis();
			margin-bottom:.25em;
			max-width: $contactFieldWidth*1.5;
			min-width: $contactFieldWidth;
		}

		SPAN[name=contactname] {
			font-size: 1.5em;
			margin: .5em 0;
		}
	}
}

.x-phone .zcs-contactview-header {
	font-size: $contactBaseFontSize*0.9;

	.zcs-contactview-image {
		height: $contactImageSize/2;
		width: $contactImageSize/2;
	}

	.zcs-contactview-personalInfo SPAN {
		max-width: $contactFieldWidth;
		min-width: $contactFieldWidth/2;
	}
}

.x-phone.x-portrait {

	.zcs-contactview-header .zcs-contactview-personalInfo SPAN {
		max-width: $contactFieldWidth/2;
		min-width: $contactFieldWidth/3;
	}
}

.zcs-contactview-fieldSets {
	font-size: $contactBaseFontSize;
	margin-top: $contactFieldTopOffset;

	.zcs-contactview-fieldSet {
		@extend .zcs-newLine;
		margin-bottom: 1em;

		.zcs-contactview-label {
			@extend .zcs-floatLeft;
			@include ellipsis();
			@include opacity(.5);
			text-align: right;
			width: $contactImageSize;
		}

		.zcs-contactview-fields {
			@extend .zcs-floatLeft;

			.zcs-contactview-field {
				@extend .zcs-newLine;
				@include ellipsis();
				margin: 0 1em 1.5em $contactGutter;
				max-width: $contactFieldWidth*2;
				min-width: $contactFieldWidth;
			}

			.zcs-contactview-street,
			.zcs-contactview-city,
			.zcs-contactview-country {
				@extend .zcs-newLine;
			}
			.zcs-contactview-state,
			.zcs-contactview-postalcode {
				@extend .zcs-floatLeft;
			}
		}

		.zcs-contactview-subLabel {
			@extend .zcs-floatLeft;
			@include ellipsis();
			@include opacity(.4);
		}
	}
}

.x-phone .zcs-contactview-fieldSets {
	font-size: $contactBaseFontSize*0.9;

	.zcs-contactview-label {
		width: $contactImageSize/2;
	}

	.zcs-contactview-fields .zcs-contactview-field {
		max-width: $contactFieldWidth;
		min-width: $contactFieldWidth/2;
	}

}

.x-phone.x-portrait {

	.zcs-contactview-fieldSets .zcs-contactview-fields .zcs-contactview-field {
		max-width: $contactFieldWidth*0.5;
		min-width: $contactFieldWidth/3;
	}
}

/* Create Contact Classes */

$contactBorderColor: #E3E3E3;

.zcs-contact-image {
	@extend .zcs-contact-person;
	height: $contactImageSize;
	margin: 3px auto auto;
	width: $contactImageSize;
}

.zcs-contact-personalinfo {
	width: 80%;
}

.zcs-contact-formline {
	border-bottom: 1px solid $light-grey;
	min-height: 1.8em;
}

.zcs-contact-form {
	background-color: white;
	background-image: none;

	.x-form-inner {
	@extend .zcs-contact-formline;

		.zcs-contact-label {
			background-color: #F7F7F7;
			padding: 12px;  /*.65em*/
			text-align: right;
		}
		.x-button.zcs-contact-addremove {
			background-color: white;
			color: $linkColor;
			font-size: .7em;

			&:active {
				background-color: $light-grey;
			}
		}
	}
}

// TODO: Fix this naming convention to use dashes rather than camelcase
.zcsContactField {
	border: solid $contactBorderColor;
	border-width: 0 0 1px;
}

.zcs-contact-imgborder,
.zcs-contact-spacer,
.zcs-contact-addremove {
	@extend .zcsContactField;
}

.x-webkit .x-layout-box.x-vertical>.x-layout-box-item.x-flexed.zcs-contact-spacer {
	height: 15px !important;
	width: 100% !important;
}
.zcs-contact-addremove {
	@include border-radius(0);
}

/* Contact Group Classes */

.zcs-contactgroupview-header {

	.zcs-contactgroupview-image {
		@extend .zcs-floatLeft;
		@extend .zcs-contact-group;
		height: $contactImageSize;
		width: $contactImageSize;
	}

	.zcs-contactgroupview-personalInfo {
		@extend .zcs-floatLeft;
		margin-left: $contactGutter;

		SPAN {
			@extend .zcs-newLine;
			@include ellipsis();
			margin-bottom:.25em;
			max-width: $contactFieldWidth*1.5;
			min-width: $contactFieldWidth;

			&[name=contactname] {
				font-size: 1.4em;
				font-weight: bold;
				margin: .5em 0;
			}
		}
	}
}

$zcsMemberWidth: 17em;
$zcsMemberHeight: 6.5em;
$zcsMemberPadding: .5em;
$zcsMemberImageSize: 4em;

.zcs-contactgroupview-members {
	@extend .zcs-floatLeft;
	margin-top: 1em;
	width: 100%;

	.zcs-contactgroupview-member {
		@extend .zcs-floatLeft;
		border: 1px solid rgba(0,0,0,.4);
		min-height: $zcsMemberHeight;
		margin: 0 1.5em 1em 0;
		overflow: hidden;
		padding: $zcsMemberPadding;
		position: relative;
		width: $zcsMemberWidth;

		.zcs-contact-image {
			height: $zcsMemberImageSize;
			left: $zcsMemberPadding;
			position:absolute;
			top: .4em;
			width: $zcsMemberImageSize;
		}

		.zcs-contact-info {
			left: $zcsMemberImageSize+$zcsMemberPadding*2;
			position: absolute;
			right: 0;
			top: $zcsMemberPadding;

			SPAN {
				@extend .zcs-newLine;
				font-size: .9em;
				line-height: 1.4em;
				width: 100%;
				word-wrap: break-word;
				@include ellipsis();

				&[name=contactname] {
					font-size: 1em;
					font-weight: bold;
					line-height: 1.5em;
				}
			}
		}
	}
}
